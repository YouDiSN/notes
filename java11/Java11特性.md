# Java11

------

1. æ›´å¤šçš„Unicodeæ”¯æŒ	

   ```java
   // java8
   public static void main(String[] args) {
       String str = "\uD83E\uDD2A";
       System.out.println(str);
   }
   
   // java11
   public static void main(String[] args) {
       String str = "ğŸ¤ª";
       System.out.println(str);
   }
   ```

   ![image-20181007150054138](/Users/xiwang/Documents/javaå­¦ä¹ ç¬”è®°/ç¬”è®°/Java/java11/Unicodeå­—ç¬¦æ”¯æŒ.png)

   > **ä½œç”¨ï¼š**
   >
   > å¯ä»¥åœ¨æ³¨é‡Šé‡Œé¢ç”¨Unicodeè¡¨æƒ…åæ§½äº§å“ç»ç†çš„éœ€æ±‚ã€‚ã€‚ã€‚
   >
   > [Unicode10é“¾æ¥](https://emojipedia.org)

2. æ›´å¥½ç”¨çš„HttpClient

   å¦‚æœç”¨javaè‡ªå·±åŸç”Ÿçš„**URLConnection**æ ·æ¿ä»£ç æ¯”è¾ƒå¤šï¼Œè€Œä¸”æ€§èƒ½ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼ˆæ¯ä¸€æ¬¡éƒ½è¦å¯åŠ¨ä¸€ä¸ªUrlConnectionï¼‰ã€‚æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬å‘httpè¯·æ±‚éƒ½æ˜¯ç”¨çš„apacheçš„HttpClientï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªä¾èµ–ã€‚

   ä½†æ˜¯java9çš„æ—¶å€™jdkæºç æ–°å¢äº†HttpClientã€‚ä½†æ˜¯æ˜¯å¤„äºå®éªŒçŠ¶æ€ã€‚

   å»å¹´java9çš„æ¼”è®²æˆªå›¾

   ![image-20181007201502898](/Users/xiwang/Documents/javaå­¦ä¹ ç¬”è®°/ç¬”è®°/Java/java11/java9HttpClient.png)

   java11æ­£å¼å‘å¸ƒäº†httpåŒ…å†…çš„åŠŸèƒ½ã€‚

   java11å‘å¸ƒçš„HttpClienté™¤äº†ä»¥å¾€æˆ‘ä»¬ä¸€ç›´ç”¨çš„é˜»å¡å‹ï¼Œè¿˜è¿›ä¸€æ­¥æ”¯æŒå“åº”å¼æ¨¡å‹ã€‚

   å°±æ˜¯JDK9åŠ å…¥çš„Flowã€‚ä½†æ˜¯å› ä¸ºæ˜¯java9æ‰åŠ å…¥çš„ï¼Œæ‰€ä»¥ç›®å‰å°±æ˜¯ä¸€å¥—æ¥å£ï¼Œä»¥åŠä¸€æ ¹ç‹¬è‹—**SubmissionPublisher**ã€‚åœ¨java.util.concurrentåŒ…ä¸­æš‚æ—¶è¿˜æ²¡æœ‰æä¾›å…¶ä»–æ›´å¤šæˆç†Ÿçš„å“åº”å¼ç¼–ç¨‹çš„ç»„ä»¶ã€‚ä½†æ˜¯åœ¨httpåŒ…ä¸­ï¼Œå·²ç»æœ‰å®ç°çš„ä»…ä¾›internalä½¿ç”¨çš„ï¼ˆå› ä¸ºæ¨¡å—åŒ–ï¼Œé‚£äº›ç±»è™½ç„¶æ˜¯publicï¼Œä½†æ˜¯å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼‰å“åº”å¼ç¼–ç¨‹çš„ç›¸å…³ç»„ä»¶ã€‚

   ```java
   package java.util.concurrent;
   
   public final class Flow {
   
       private Flow() {}
   
       @FunctionalInterface
       public static interface Publisher<T> {
           public void subscribe(Subscriber<? super T> subscriber);
       }
   
       public static interface Subscriber<T> {
           public void onSubscribe(Subscription subscription);
   
           public void onNext(T item);
   
           public void onError(Throwable throwable);
   
           public void onComplete();
       }
   
       public static interface Subscription {
           public void request(long n);
   
           public void cancel();
       }
   
       public static interface Processor<T,R> extends Subscriber<T>, Publisher<R> {
       }
   
       static final int DEFAULT_BUFFER_SIZE = 256;
   
       public static int defaultBufferSize() {
           return DEFAULT_BUFFER_SIZE;
       }
   
   }
   
   ```

3. æ›´å®‰å…¨çš„åŠ å¯†

   - å¢å¼ºçš„KeyStoreæœºåˆ¶
   - JEP329 ChaCha20å’ŒPoly1305åŠ å¯†ç®—æ³•
   - æ·»åŠ äº†Brainpool ECæ”¯æŒï¼ˆRFC 5639ï¼‰
   - Curve25519å’ŒCurve448çš„å¯†é’¥åè®®
   - RSASSA-PSSç­¾åæ”¯æŒå·²æ·»åŠ åˆ°SunMSCAPI
   - JEP332ä¼ è¾“å±‚å®‰å…¨æ€§ï¼ˆTLSï¼‰1.3

4. lamdaå‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨var

   ```java
       public static void main(String[] args) {
           Map<String, String> stringMap = Map.of("k1", "v1", "k2", "v2", "k3", "v3");
   
           stringMap.forEach((k, v) -> {
               System.out.println(k);
               System.out.println(v);
           });
   
           // è¿™é‡Œå¯ä»¥ç”¨varï¼Œç”¨varçš„ç›®çš„æ˜¯å¯ä»¥åŠ æ³¨è§£
           stringMap.forEach((@NotEmpty var k, @Nullable var v) -> {
               System.out.println(k);
               System.out.println(v);
           });
       }
   ```

   lamdaä¸­ä½¿ç”¨varæ„Ÿè§‰åªæœ‰åœ¨æœ‰ä¸€å¥—å®Œæ•´çš„æ¡†æ¶ï¼ˆè¿™ä¸ªæ¡†æ¶ä¼šæ ¹æ®ä½ çš„æ³¨è§£æ¥åšå„ç§æ ¡éªŒï¼‰ï¼Œè¿™ä¸ªæ¡†æ¶çš„åŠŸèƒ½å¦‚æœå®Œå–„ï¼Œé‚£ä¹ˆè¿™ä¸ªåŠŸèƒ½å°±ä¼šæ¯”è¾ƒå¼ºå¤§ï¼Œå¯ä»¥çœå»å¾ˆå¤šç›˜ç©ºç­‰é€»è¾‘ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªæ¡†æ¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ³¨è§£æ›´å¤šçš„åªæ˜¯æ ‡è¯†çš„ä½œç”¨ï¼Œé‚£ä¹ˆæ„Ÿè§‰æ„ä¹‰ä¸æ˜¯å¾ˆå¤§ã€‚

5. åŸºäºåµŒå¥—çš„è®¿é—®æ§åˆ¶

   [JEP 181: Nest-Based Access Control](http://openjdk.java.net/jeps/181)

   å¼•å…¥ä¸€ä¸ªæœºåˆ¶ï¼Œå°±æ˜¯å¦‚æœä¸€äº›ç±»é€»è¾‘ä¸Šæ˜¯å±äºåŒä¸€ä¸ªä»£ç å®ä½“çš„ï¼Œä½†æ˜¯ç¼–è¯‘çš„æ—¶å€™è¢«ç¼–è¯‘åˆ°äº†ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆè¿™äº›ç±»ä¹Ÿåº”å½“å…±äº«ç§æœ‰å˜é‡ç­‰ã€‚

   åŠ¨æœºä¸»è¦æ˜¯jvmä¸Šè¿è¡Œçš„è¯­è¨€ï¼ˆä¸ä»…ä»…æ˜¯javaï¼‰ï¼Œå¾€å¾€ä¼šæŠŠå¤šä¸ªç±»æ”¾åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼ˆæ¯”å¦‚java çš„åµŒå¥—ç±»ï¼‰ï¼Œè¿™äº›ç±»åº”å½“è¢«è®¤ä¸ºæ˜¯åœ¨â€œåŒä¸€ä¸ªç±»â€ä¸­çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¾€å¾€è®¤ä¸ºï¼Œaccess controlï¼ˆæŒ‡çš„æ˜¯privateã€java10å¼€å§‹çš„æ¨¡å—ç­‰æ§åˆ¶ï¼‰åº”å½“æ˜¯å…±äº«çš„ã€‚ä¹‹å‰ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œç¼–è¯‘å™¨å¾€å¾€éœ€è¦å°†privateå­—æ®µçš„æ§åˆ¶æ‹“å®½åˆ°packageçº§åˆ«ã€‚ç„¶ååœ¨é€šè¿‡ä¸€ä¸ªaccess bridgesï¼ˆæ§åˆ¶æ¡¥æ¥ï¼Ÿï¼‰ï¼ˆè¿™ä¸ªä¸œè¥¿æˆ‘ç†è§£å°±æ˜¯ï¼Œé€šè¿‡ç”Ÿæˆä¸€ä¸ªpackgeå¯ä»¥è®¿é—®çº§åˆ«çš„æ–¹æ³•ï¼Œæ¥è®¿é—®è¿™äº›privateå˜é‡ï¼‰ã€‚

   è¿™äº›æ¡¥æ¥æ–¹æ³•ä¸€æ–¹é¢å¢åŠ äº†ç¼–è¯‘å™¨çš„å®ç°éš¾åº¦ï¼Œä¸€æ–¹é¢åˆå¢åŠ äº†æºç ç¼–è¯‘åçš„ä½“ç§¯ï¼ŒåŒæ—¶ä¹Ÿç ´åäº†ä»£ç çš„å°è£…æ€§ã€‚

   æ–°ç‰ˆæœ¬å…·ä½“çš„å®ç°å°±æ˜¯æ–°å¢ä¸€ä¸ªnestçº§åˆ«çš„access controlï¼ˆpublic, protected, defaultï¼ˆpackageï¼‰, privateï¼‰ã€‚å¤§å®¶è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªæ˜¯ç¼–è¯‘åçš„ç±»æ–‡ä»¶ä¸­å¢åŠ çš„ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬ä»£ç ä¸­å¢åŠ çš„çº§åˆ«ã€‚

   **éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ”¹åŠ¨å¯èƒ½ä¼šå½±å“åˆ°åå°„çš„APIï¼Œä»¥åŠMethodHandleå¥æŸ„ç›¸å…³APIï¼Œå…·ä½“ä»€ä¹ˆå½±å“æš‚æ—¶è¿˜æ²¡ç ”ç©¶å‡ºæ¥ã€‚ã€‚ã€‚**

   è¿™ä¸ªæ”¹åŠ¨è¿˜å¯ä»¥ç”¨æ¥æ”¾ç½®ä¸€äº›java jaråŒ…æ‰“åŒ…å·¥å…·ï¼Œåœ¨ä¼˜åŒ–çš„æ—¶å€™å› ä¸ºå†…éƒ¨ç±»ã€åµŒå¥—ç±»ç­‰é€»è¾‘ï¼Œå¿½ç•¥äº†ä»–ä»¬çš„é¡¶éƒ¨ç±»ã€‚

6. åŠ¨æ€çš„ç±»æ–‡ä»¶å¸¸é‡

   [JEP 309: Dynamic Class-File Constants](http://openjdk.java.net/jeps/309)

   æ‹“å±•javaç±»æ–‡ä»¶æ ¼å¼ä»¥æ”¯æŒä¸€ä¸ªæ–°çš„å¸¸é‡æ± æ ¼å¼ï¼š**CONSTANT_Dynamic**ã€‚åŠ è½½è¿™ä¸ªç±»æ–‡ä»¶å˜é‡ä¹Ÿä¼šåœ¨ä¸€ä¸ªbootstrapæ–¹æ³•ä¸­ï¼Œå°±å¥½æ¯”**invokedynamic**æŒ‡ä»¤ä¼šåœ¨ä¸€ä¸ªbootstrapæ–¹æ³•ä¸­ä¸€æ ·ï¼ˆlamdaåŠ¨æ€è°ƒç”¨ï¼‰ã€‚

   è¿™ä¸ªä¸œè¥¿çš„ä¸»è¦ç›®çš„æ˜¯ç»™lamdaå‡½æ•°ç¼–è¯‘åçš„**invokedynamic**æŒ‡ä»¤ç”¨çš„ï¼Œä¸ºäº†å®ç°è¿™ä¸ªæŒ‡ä»¤ï¼Œåœ¨å¸¸é‡æ± ä¸­æ·»åŠ äº†å¾ˆå¤šéå¸¸å¤æ‚çš„å˜é‡ï¼Œä¹Ÿç»™ç›¸å…³çš„å®ç°å¸¦äº†å¾ˆé«˜çš„å¤æ‚åº¦ï¼Œä¸ºäº†è®©è¿™ä¸ªåŠŸèƒ½æ›´çµæ´»å¼ºå¤§ï¼ŒåŒæ—¶ä¹Ÿæé«˜æ€§èƒ½å’Œé™ä½ç¼–è¯‘å™¨çš„å¤æ‚æ€§ï¼Œå°±å¢åŠ äº†è¿™ä¸ªæœºåˆ¶ã€‚

7. GCï¼šZGCå’ŒEpsilon

   Epsilonå°±æ˜¯ä¸€ä¸ªä»€ä¹ˆéƒ½ä¸æ•¢çš„åƒåœ¾æ”¶é›†å™¨ã€‚

   **ZGCåƒåœ¾æ”¶é›†å™¨**ï¼Œä¹Ÿç§°ä¸º**ZGC**ï¼Œæ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼Œæœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š

   - æš‚åœæ—¶é—´**ä¸**è¶…è¿‡**10æ¯«ç§’**
   - æš‚åœæ—¶é—´**ä¸ä¼š**éšå †æˆ–å®æ—¶è®¾ç½®å¤§å°**è€Œ**å¢åŠ 
   - å¤„ç†å †èŒƒå›´ä»**å‡ ç™¾M**åˆ°**å‡ TB**ã€‚

8. shebang

   å¯ä»¥é€šè¿‡javaæ–‡ä»¶å¤´å¢åŠ **#!/path/to/java --source version**ï¼Œæ¥ç›´æ¥è¿™æ ·è°ƒç”¨javaç¨‹åºï¼š**./test.java**ã€‚

   > æˆ‘è‡ªå·±è¯•äº†ã€‚ã€‚å¥½åƒä¸è¡Œâ€” â€”#